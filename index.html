<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Ilha do Terror</title>
<style>
    body {
        margin: 0;
        background: black;
        color: white;
        font-family: Arial, sans-serif;
        overflow: hidden;
    }
    #game {
        position: relative;
        width: 800px;
        height: 600px;
        margin: 20px auto;
        background: #111;
        border: 3px solid red;
    }
    .player, .enemy, .item {
        position: absolute;
        width: 20px;
        height: 20px;
    }
    .player { background: lime; }
    .enemy { background: red; }
    .item { background: yellow; }
    #info {
        text-align: center;
        font-size: 18px;
    }
</style>
</head>
<body>

<div id="info">
    Colete 10 itens para escapar! Itens coletados: <span id="score">0</span>/10
</div>

<div id="game">
    <div class="player" id="player"></div>
    <div class="enemy" id="enemy"></div>
</div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const enemy = document.getElementById("enemy");
const scoreDisplay = document.getElementById("score");

let playerX = 50, playerY = 50;
let enemyX = 700, enemyY = 500;
let score = 0;
let items = [];

function randomPosition(max) {
    return Math.floor(Math.random() * max);
}

function createItems() {
    for (let i = 0; i < 67; i++) {
        const item = document.createElement("div");
        item.classList.add("item");
        item.style.left = randomPosition(780) + "px";
        item.style.top = randomPosition(580) + "px";
        game.appendChild(item);
        items.push(item);
    }
}

function movePlayer(dx, dy) {
    playerX += dx;
    playerY += dy;

    playerX = Math.max(0, Math.min(780, playerX));
    playerY = Math.max(0, Math.min(580, playerY));

    player.style.left = playerX + "px";
    player.style.top = playerY + "px";

    checkCollision();
}

function moveEnemy() {
    if (enemyX < playerX) enemyX += 1.5;
    if (enemyX > playerX) enemyX -= 1.5;
    if (enemyY < playerY) enemyY += 1.5;
    if (enemyY > playerY) enemyY -= 1.5;

    enemy.style.left = enemyX + "px";
    enemy.style.top = enemyY + "px";

    if (Math.abs(enemyX - playerX) < 15 && Math.abs(enemyY - playerY) < 15) {
        alert("Você foi pego! Fim de jogo.");
        location.reload();
    }
}

function checkCollision() {
    items.forEach((item, index) => {
        const itemX = parseInt(item.style.left);
        const itemY = parseInt(item.style.top);

        if (Math.abs(itemX - playerX) < 15 && Math.abs(itemY - playerY) < 15) {
            game.removeChild(item);
            items.splice(index, 1);
            score++;
            scoreDisplay.textContent = score;

            if (score >= 10) {
                alert("Você escapou da ilha! Parabéns!");
                location.reload();
            }
        }
    });
}

document.addEventListener("keydown", (e) => {
    switch(e.key) {
        case "ArrowUp": movePlayer(0, -10); break;
        case "ArrowDown": movePlayer(0, 10); break;
        case "ArrowLeft": movePlayer(-10, 0); break;
        case "ArrowRight": movePlayer(10, 0); break;
    }
});

createItems();
player.style.left = playerX + "px";
player.style.top = playerY + "px";
enemy.style.left = enemyX + "px";
enemy.style.top = enemyY + "px";

setInterval(moveEnemy, 20);
</script>

</body>
</html>
