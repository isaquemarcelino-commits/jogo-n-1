<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Futebol 3D 1v1</title>
<style>
body { margin:0; overflow:hidden; background:#0b6623; }
#placar {
    position:absolute;
    top:10px;
    left:50%;
    transform:translateX(-50%);
    color:white;
    font-size:28px;
    font-family:Arial;
    background:rgba(0,0,0,0.6);
    padding:10px 20px;
    border-radius:10px;
}
</style>
</head>
<body>

<div id="placar">ðŸ”µ 0 x 0 ðŸ”´</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>

let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Luz
let light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(0,50,20);
scene.add(light);

// ===== CAMPO =====
let field = new THREE.Mesh(
    new THREE.PlaneGeometry(120,70),
    new THREE.MeshPhongMaterial({color:0x1e7a1e})
);
field.rotation.x = -Math.PI/2;
scene.add(field);

// Linhas
let lineMaterial = new THREE.LineBasicMaterial({color:0xffffff});
let lineGeometry = new THREE.BufferGeometry().setFromPoints([
    new THREE.Vector3(-60,0.1,0),
    new THREE.Vector3(60,0.1,0)
]);
let midfield = new THREE.Line(lineGeometry,lineMaterial);
scene.add(midfield);

// ===== GOL =====
function criarGol(zPos){
    let group = new THREE.Group();

    let postMaterial = new THREE.MeshPhongMaterial({color:0xffffff});
    let post1 = new THREE.Mesh(new THREE.BoxGeometry(1,8,1),postMaterial);
    let post2 = post1.clone();
    let topBar = new THREE.Mesh(new THREE.BoxGeometry(20,1,1),postMaterial);

    post1.position.set(-10,4,zPos);
    post2.position.set(10,4,zPos);
    topBar.position.set(0,8,zPos);

    group.add(post1,post2,topBar);

    return group;
}

scene.add(criarGol(-35));
scene.add(criarGol(35));

// ===== PERSONAGEM =====
function criarJogador(cor){
    let group = new THREE.Group();
    let material = new THREE.MeshPhongMaterial({color:cor});

    let body = new THREE.Mesh(new THREE.BoxGeometry(3,6,2),material);
    body.position.y = 6;

    let head = new THREE.Mesh(new THREE.SphereGeometry(1.5,16,16),material);
    head.position.y = 10;

    let arm1 = new THREE.Mesh(new THREE.BoxGeometry(1,4,1),material);
    arm1.position.set(-2.5,6,0);

    let arm2 = arm1.clone();
    arm2.position.x = 2.5;

    let leg1 = new THREE.Mesh(new THREE.BoxGeometry(1,5,1),material);
    leg1.position.set(-1,2.5,0);

    let leg2 = leg1.clone();
    leg2.position.x = 1;

    group.add(body,head,arm1,arm2,leg1,leg2);
    return group;
}

let player = criarJogador(0x0000ff);
player.position.set(0,0,20);
scene.add(player);

let enemy = criarJogador(0xff0000);
enemy.position.set(0,0,-20);
scene.add(enemy);

// ===== BOLA =====
let ball = new THREE.Mesh(
    new THREE.SphereGeometry(1.5,32,32),
    new THREE.MeshPhongMaterial({color:0xffffff})
);
ball.position.set(0,1.5,0);
scene.add(ball);

let ballVelocity = new THREE.Vector3();
let score1=0, score2=0;

// ===== CONTROLES =====
let keys={};
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

// ===== CÃ‚MERA =====
camera.position.set(0,60,60);
camera.lookAt(0,0,0);

// ===== UPDATE =====
function update(){

    // Player controle
    if(keys["a"]) player.position.x-=0.6;
    if(keys["d"]) player.position.x+=0.6;
    if(keys["w"]) player.position.z-=0.6;
    if(keys["s"]) player.position.z+=0.6;

    // IA simples inimigo
    if(enemy.position.x < ball.position.x) enemy.position.x+=0.4;
    if(enemy.position.x > ball.position.x) enemy.position.x-=0.4;
    if(enemy.position.z < ball.position.z) enemy.position.z+=0.4;
    if(enemy.position.z > ball.position.z) enemy.position.z-=0.4;

    // Chute
    function tentarChutar(jogador,forca){
        let dist = jogador.position.distanceTo(ball.position);
        if(dist<4){
            let dir = new THREE.Vector3().subVectors(ball.position,jogador.position).normalize();
            ballVelocity = dir.multiplyScalar(forca);
        }
    }

    if(keys[" "]) tentarChutar(player,2);
    tentarChutar(enemy,1.5);

    // FÃ­sica bola
    ball.position.add(ballVelocity);
    ballVelocity.multiplyScalar(0.98);

    // Limites
    ball.position.x=Math.max(-58,Math.min(58,ball.position.x));
    ball.position.z=Math.max(-38,Math.min(38,ball.position.z));

    // Gol
    if(ball.position.z < -34 && Math.abs(ball.position.x)<10){
        score1++;
        reset();
    }

    if(ball.position.z > 34 && Math.abs(ball.position.x)<10){
        score2++;
        reset();
    }

    document.getElementById("placar").innerText =
        "ðŸ”µ "+score1+" x "+score2+" ðŸ”´";
}

function reset(){
    ball.position.set(0,1.5,0);
    ballVelocity.set(0,0,0);
    player.position.set(0,0,20);
    enemy.position.set(0,0,-20);
}

// ===== LOOP =====
function animate(){
    requestAnimationFrame(animate);
    update();
    renderer.render(scene,camera);
}
animate();

</script>
</body>
</html>
